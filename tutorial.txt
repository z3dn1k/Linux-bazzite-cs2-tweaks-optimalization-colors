==============================================================================
CS2 VIBRANCE & STRETCHED RES SETUP GUIDE (LINUX)
==============================================================================

This guide helps you manually install a "Vibrance" shader for vkBasalt and 
configure Gamescope for a stretched resolution in Counter-Strike 2.

PREREQUISITES:
- vkbasalt (Installed via your package manager)
- gamescope (Installed via your package manager)

------------------------------------------------------------------------------
STEP 1: INSTALL THE SHADER FILES
------------------------------------------------------------------------------
This step creates the necessary folders, downloads the required "ReShade.fxh" 
helper file, and creates the "Vibrance.fx" shader file.

INSTRUCTIONS:
Copy and paste the entire block of code below into your terminal:

# 1. Create the necessary folders
mkdir -p "$HOME/.local/share/vkBasalt/shaders/Shaders"
mkdir -p "$HOME/.local/share/vkBasalt/shaders/Textures"

# 2. Download the Helper file (ReShade.fxh)
wget https://raw.githubusercontent.com/crosire/reshade-shaders/master/Shaders/ReShade.fxh -O "$HOME/.local/share/vkBasalt/shaders/Shaders/ReShade.fxh"

# 3. Create the Vibrance.fx file (Default: 1.00 Intensity)
cat <<EOF > "$HOME/.local/share/vkBasalt/shaders/Shaders/Vibrance.fx"
#include "ReShade.fxh"

uniform float VibranceIntensity <
    ui_type = "drag";
    ui_min = -1.0; ui_max = 1.0;
> = 1.00; // <--- EDIT THIS VALUE TO CHANGE INTENSITY (e.g. 0.50 or 1.00)

float3 VibrancePass(float4 vpos : SV_Position, float2 texcoord : TexCoord) : SV_Target
{
    float3 color = tex2D(ReShade::BackBuffer, texcoord).rgb;
    float3 coefLuma = float3(0.2126, 0.7152, 0.0722);
    float luma = dot(coefLuma, color);
    float max_color = max(color.r, max(color.g, color.b));
    float min_color = min(color.r, min(color.g, color.b));
    float color_saturation = max_color - min_color;
    color = lerp(luma, color, (1.0 + (VibranceIntensity * (1.0 - (sign(VibranceIntensity) * color_saturation)))));
    return color;
}

technique Vibrance
{
    pass
    {
        VertexShader = PostProcessVS;
        PixelShader = VibrancePass;
    }
}
EOF

------------------------------------------------------------------------------
STEP 2: CREATE THE CONFIG FILE
------------------------------------------------------------------------------
This step links vkBasalt to the shader we just created and assigns the 
"Home" key as a toggle switch.

INSTRUCTIONS:
Copy and paste the entire block below into your terminal:

# 1. Ensure the config directory exists
mkdir -p "$HOME/.config/vkBasalt"

# 2. Write the configuration file
cat <<EOF > "$HOME/.config/vkBasalt/vkBasalt.conf"
reshadeIncludePath = $HOME/.local/share/vkBasalt/shaders/Shaders
reshadeTexturePath = $HOME/.local/share/vkBasalt/shaders/Textures

effects = Vibrance
Vibrance = $HOME/.local/share/vkBasalt/shaders/Shaders/Vibrance.fx

toggleKey = Home
EOF

------------------------------------------------------------------------------
STEP 3: CS2 LAUNCH OPTIONS
------------------------------------------------------------------------------
This sets up Gamescope for stretched resolution and enables vkBasalt.

INSTRUCTIONS:
Go to Steam Library > Right-click CS2 > Properties > Launch Options.
Paste the line below:

gamescope -w 1080 -h 1080 -W 1920 -H 1080 -r 320 -S stretch -f --force-grab-cursor -- env ENABLE_VKBASALT=1 %command% -high -novid -fullscreen

IMPORTANT HARDWARE NOTES:
- "-r 320": This is the Refresh Rate. Change "320" to 144, 165, or 240 if needed.
- "-w 1080 -h 1080": This is the stretched resolution (1080x1080).
- "-W 1920 -H 1080": This is your native monitor resolution.

------------------------------------------------------------------------------
SUMMARY
------------------------------------------------------------------------------
- To Toggle Colors: Press the "Home" key on your keyboard while in-game.
- To Change Intensity: Edit the "Vibrance.fx" file located in:
  ~/.local/share/vkBasalt/shaders/Shaders/
